-- SCRIPT DML - LINGUAGEM DE MANIPULAÇÃO DOS DADOS
-- REALIZA O CRUD (MANUTENÇÃO DOS DADOS DENTRO DA ESTRUTURA)
-- COMANDOS: INSERT, UPDATE E DELETE
--COMANDOS DML NÃO SÃO CASE SENSITIVE (OS COMANDOS PODEMOS ESCREVER EM MAIUSCULAS/MINUSCULAS)
--CONTEUDO ARMAZENADO É CASE SENSITIVE (HÁ DIFERENÇA ENTRE MINUSCULAS/MAIUSCULAS)


--INSERIR UMA LINHA/REGISTRO NA TABELA
INSERT INTO T_SIP_DEPTO(cd_depto, nm_depto, sg_depto) --NOME DAS COLUNAS/CAMPO DA TABELA
	VALUES(1,'FINANCEIRO','FIN'); --VALORES QUE SERÃO ARMAZENADOS NAS COLUNAS/CAMPOS

--CONSULTANDO OS DADOS ARMAZENADOS
SELECT * FROM T_SIP_DEPTO; 
--CONSULTANDO TODAS AS COLUNAS E LINHAS DA TABELA DEPTO (CONSULTANDO TABELA INTEIRA)

--COMANDOS DML, NECESSITAM SER EFETIVADOS NO DISCO - É NECESSÁRIO UM COMANDO COMMIT, PARA ESSA EFETIVAÇÃO
--APENAS UM COMMIT NO FINAL DAS TRANSAÇÕES (INSERT/UPDATE/DELETE)
COMMIT;

--INSERIR UMA LINHA/REGISTRO NA TABELA
INSERT INTO T_SIP_DEPTO VALUES(2,'MARKETING','MKT');
--QUANDO OMITIMOS OS NOMES DAS COLUNAS E INFORMAMOS DIRETAMENTE OS VALORES
--OS VALORES DEVEM VIR NA MESMA ORDEM DA CRIAÇÃO DAS TABELAS
--VALORES QUE SERÃO ARMAZENADOS NAS COLUNAS/CAMPOS

DESC T_SIP_DEPTO;


--INSERÇÃO CONTENDO DATA/HORA
INSERT INTO T_SIP_PROJETO VALUES (1,'PROJETO ABC', --VALROES PARA AS COLUNAS CODIGO E NOME DO PROJETO
                                  TO_DATE('01/08/2012','DD/MM/YYYY'), --DATA ARMAZENADA NA DATA DE INICIO DO PROJETO
                                  TO_DATE('15/03/2018','DD/MM/YYYY')); --DATA ARMAZENADA NA DATA TERMINO DO PROJETO

DESC T_SIP_PROJETO;

SELECT * FROM T_SIP_PROJETO;


--INSERINDO CONTEUDO CONTENDO VALORES DECIMAIS
INSERT INTO T_SIP_FUNCIONARIO VALUES (12345, 1, --COD. DEPTO =1 --FK (SO PODE USAR UM VALOR QUE EXISTA)
                                      'JOÃO DA SILVA XAVIER', TO_DATE('18/03/1985','DD/MM/YYYY'),
                                      TO_DATE('11/07/2012','DD/MM/YYYY'), 'AVENIDA PAULISTA, 1900',
                                      3189.57); --UTILIZAMOS O PONTO DECIMAL (A VIRGULA E USADA PARA SEPARAR OS CONTEUDOS

DESC T_SIP_FUNCIONARIO

SELECT * FROM T_SIP_FUNCIONARIO;


--INSERINDO VALORES NULOS PARA CAMPOS OPCIONAIS
--METODO IMPLICITO - OMITA A COLUNA DA LISTA DE COLUNAS
--DT_TERMINO É OPCIONAL E SERÁ OMITIDA NA DECLARAÇÃO DO COMANDO
INSERT INTO T_SIP_PROJETO (CD_PROJETO, NM_PROJETO, DT_INICIO)
    VALUES (2, 'PROJETO DEF', TO_DATE('14/03/2019','DD/MM/YYYY'));
-- OBSERVE QUE OMITIMOS O CAMPO DT_TERMINO (CAMPO OPCIONAL) NA DECLARAÇÃO DAS COLUNAS, DESTA FORMA,
-- NÃO INFORMAMOS A DATA NA LISTA DE VALORES DA CLAUSULA VALUES PARA INSERÇÃO
-- O CAMPO OPCIONAL, QUE FOI OMITIDO, SERÁ PREENCHIDO COM NULL (NULO)

SELECT * FROM T_SIP_PROJETO;

-- MÉTODO EXPLICITO - ESPECIFIQUE A PALAVRA-CHAVE NULL, NA CLAUSULA VALUES
-- SÃO ENVIADOS TODOS OS VALORES
INSERT INTO T_SIP_PROJETO VALUES(3, 'PROJETO GHI', TO_DATE('18/09/2019','DD/MM/YYYY'), NULL);
-- ENVIO DE NULO PARA O CAMPO OPCIONAL DATA TERMINO DO PROJETO DE FORMA EXPLICITA

SELECT * FROM T_SIP_PROJETO


-- REALIZANDO COPIA DE DADOS DE UMA TABELA PARA OUTRA
-- CRIAR UMA TABELA PARA REALIZAR A CÓPIA
CREATE TABLE T_SIP_COPY_PROJETO_FIN
(
CD_PROJETO NUMBER(5) NOT NULL ,
NM_PROJETO VARCHAR2(40) NOT NULL ,
DT_INICIO DATE NOT NULL ,
DT_TERMINO DATE NOT NULL
);



-- CHAVE PRIMARIA DA TABELA COPIA PROJETOS FINALIZADOS
ALTER TABLE T_SIP_COPY_PROJETO_FIN
ADD CONSTRAINT PK_SIP_COPY_PROJETO_FIN
PRIMARY KEY (CD_PROJETO);

DESC T_SIP_COPY_PROJETO_FIN;

-- REALIZANDO A COPIA DOS DADOS DE UMA TABELA PARA OUTRA
-- UTILIZANDO O COMANDO INSERT E O COMANDO SELECT (SUBCONSULTA OU SUBQUERY)
INSERT INTO T_SIP_COPY_PROJETO_FIN
            (SELECT * FROM T_SIP_PROJETO WHERE DT_TERMINO IS NOT NULL);
            
SELECT * FROM T_SIP_COPY_PROJETO_FIN;

-- OS PROJETOS FINALIZADOS, POSSUEM A DATA TERMINO INFORMADA
-- PORTANTO A VALIDAÇÃO, PERGUNTAMOS SE A DATA TERMINO NÃO E NULA (POSSUI DATA) - IS NOT NULL
-- PARA FAZER ESTA VALIDAÇÃO UTILIZAMOS O OPERADOR IS NOT NULL
-- NÃO FUNCIONA SE ESCREVERMOS DT_TERMINO <> NULL (POIS NULL NÃO TEM VALOR, E NÃO PODEMOS USAR OPERADOR RELACIONAL)

-- DESTA FORMA NÃO FUNCIONA, PORQUE NULO NAO TEM VALOR
-- DT_TERMINO = NULL
-- DT_TERMINO <> NULL

-- FUNCIONA APENAS DESTA FORMA
-- DT_TERMINO IS NULL -> DT_TERMINO E IGUAL A NULO
-- DT_TERMINO IS NOT NULL -> DT_TERMINO E DIFERENTE DE NULO
